<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SNS Tester</title>
  </head>
  <style>
    .content {
      max-width: 500px;
      margin: auto;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@seedao/sns-js@0.4.5/dist/iife/index.min.js"></script>
  <script>
    function getAddr() {
      const btn = document.getElementById("get_addr_button");
      btn.innerText = "Querying...";
      btn.disabled = "disabled";

      const span = document.getElementById("get_addr_span");
      span.innerText = "";

      const name = document.getElementById("get_addr_input").value;
      sns.resolve(name + ".seedao").then((r) => {
        span.innerText = "SNS: " + r;

        btn.innerText = "Query Addr";
        btn.disabled = "";
      });
    }

    function getSNS() {
      const btn = document.getElementById("get_sns_button");
      btn.innerText = "Querying...";
      btn.disabled = "disabled";

      const span = document.getElementById("get_sns_span");
      span.innerText = "";

      const addr = document.getElementById("get_sns_input").value;
      sns.name(addr).then((r) => {
        span.innerText = "SNS: " + r;

        btn.innerText = "Query SNS";
        btn.disabled = "";
      });
    }

    function getAddrList() {
      const btn = document.getElementById("get_addr_list_button");
      btn.innerText = "Querying...";
      btn.disabled = "disabled";

      const span = document.getElementById("get_addr_list_span");
      span.innerText = "";

      const name = document.getElementById("get_addr_list_input").value;
      const names = name
        .toString()
        .split(",")
        .map((n) => n + ".seedao");
      sns.resolves(names).then((r) => {
        span.innerText = "SNS: " + r;

        btn.innerText = "Query Multi Addr";
        btn.disabled = "";
      });
    }

    function getSNSList() {
      const btn = document.getElementById("get_sns_list_button");
      btn.innerText = "Querying...";
      btn.disabled = "disabled";

      const span = document.getElementById("get_sns_list_span");
      span.innerText = "";

      const addr = document.getElementById("get_sns_list_input").value;
      const addrs = addr.toString().split(",");
      sns.names(addrs).then((r) => {
        span.innerText = "SNS: " + r;

        btn.innerText = "Query Multi SNS";
        btn.disabled = "";
      });
    }
  </script>
  <body>
    <div class="content">
      <form>
        <label>
          <input id="get_addr_input" type="text" value="baiyu" />
          <span>.seedao</span>
        </label>
      </form>
      <button id="get_addr_button" onclick="getAddr()">Query Addr</button>
      <br />
      <span id="get_addr_span"></span>
      <form>
        <label>
          <input
            id="get_sns_input"
            type="text"
            size="64"
            value="0x8C913aEc7443FE2018639133398955e0E17FB0C1"
          />
        </label>
      </form>
      <button id="get_sns_button" onclick="getSNS()">Query SNS</button>
      <br />
      <span id="get_sns_span"></span>

      <hr />

      <form>
        <label>
          <input id="get_addr_list_input" type="text" value="baiyu,tanghan" />
          <span>.seedao</span>
        </label>
      </form>
      <button id="get_addr_list_button" onclick="getAddrList()">
        Query Multi Addr
      </button>
      <br />
      <span id="get_addr_list_span"></span>
      <form>
        <label>
          <input
            id="get_sns_list_input"
            type="text"
            size="64"
            value="0x8C913aEc7443FE2018639133398955e0E17FB0C1,0x78f625A65Fc316D32d98d249b698fb509A6d98f2"
          />
        </label>
      </form>
      <button id="get_sns_list_button" onclick="getSNSList()">
        Query Multi SNS
      </button>
      <br />
      <span id="get_sns_list_span"></span>
    </div>
  </body>
</html>
